--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -25,6 +25,9 @@ OPTION(AFNI_BUILD_CORELIBS_ONLY
 OPTION(AFNI_BUILD_WITH_LESSTIF2
        "Build using lesstif2, otherwise with OpenMotif"
        ON)
+OPTION(AFNI_BUILD_TESTS
+       "Enable testing and build available tests"
+       OFF)
 
 #
 # Install destinations
@@ -278,6 +281,10 @@ ELSE(AFNI_BUILD_LOCAL_GIFTI)
   ENDIF(GIFTI_LIBRARY)
 ENDIF(AFNI_BUILD_LOCAL_GIFTI)
 
+IF(AFNI_BUILD_TESTS)
+  ENABLE_TESTING()
+ENDIF(AFNI_BUILD_TESTS)
+
 # everything that is not necessary for corelibs
 IF(NOT AFNI_BUILD_CORELIBS_ONLY)
   ADD_SUBDIRECTORY(rickr)
@@ -300,4 +307,6 @@ IF(NOT AFNI_BUILD_CORELIBS_ONLY)
   ADD_SUBDIRECTORY(faces)
   ADD_SUBDIRECTORY(poems)
 
+  ADD_SUBDIRECTORY(tests)
+
 ENDIF(NOT AFNI_BUILD_CORELIBS_ONLY)
--- /dev/null
+++ b/tests/CMakeLists.txt
@@ -0,0 +1,21 @@
+PROJECT(TESTS)
+#
+# Tests -- building/running is aggregated within a separate directory
+#          so they do not interact/pollute main build space
+#
+# yoh: for some reason WORKING_DIRECTORY is not quite working for me
+#      says BAD_COMMAND for the binary to be executed.  That is why
+#      this solution with tests/ directory
+#
+#  ADD_TEST(NAME testdsetio
+#           WORKING_DIRECTORY temp-tests
+#	       COMMAND testdsetio )
+
+ADD_TEST(testdsetio testdsetio)
+
+ADD_EXECUTABLE(testdsetio ../SUMA/SUMA_TestDsetIO.c)
+TARGET_LINK_LIBRARIES(testdsetio afni_warp SUMA 3DEdge segtools ${AFNI_LIBS})
+
+# TODO: figure out how to reference it correctly, or just copy to this
+# target tests/ build directory
+ADD_TEST(do.examples ../../tests/xvfb-driver @DO.examples -auto_test)
--- /dev/null
+++ b/tests/xvfb-driver
@@ -0,0 +1,20 @@
+#!/bin/sh
+set -eu
+
+srcdir=$(readlink -f `dirname $0`/..)
+buildir=$(readlink -f $PWD/..)
+tempdir=`mktemp -d`
+
+cleanup() { rm -r "$tempdir"; }
+trap 'cleanup' EXIT HUP
+
+echo "I: buildir=$buildir  srcdir=$srcdir tempdir=$tempdir"
+cd $tempdir
+PATH=$buildir:$buildir/SUMA:$srcdir:$PATH \
+	xvfb-run --auto-servernum --server-num=20 -s "-screen 0 1024x768x24 -ac +extension GLX +render -noreset" \
+	"$@" 2>&1 | tee __outputlog.txt
+
+if grep -q Error __*log.txt; then
+	echo "I: Test failed due to presence of Error messages" >&2
+	exit 1
+fi
--- a/3DEdge/src/CMakeLists.txt
+++ b/3DEdge/src/CMakeLists.txt
@@ -11,3 +11,17 @@ INSTALL(TARGETS 3DEdge
   RUNTIME DESTINATION ${AFNI_INSTALL_BIN_DIR} COMPONENT Runtime
   LIBRARY DESTINATION ${AFNI_INSTALL_LIB_DIR} COMPONENT Runtime
   ARCHIVE DESTINATION ${AFNI_INSTALL_LIB_DIR} COMPONENT Development)
+
+#
+# Tests
+#
+
+SET(TESTS
+ test-edges test-edges-pnm test-hyster-pnm
+)
+
+FOREACH(test ${TESTS})
+	ADD_EXECUTABLE(${test} ${test}.c)
+    TARGET_LINK_LIBRARIES(${test} 3DEdge m)
+	ADD_TEST(${test} ${test})
+ENDFOREACH(test)
